# Querydsl vs JPA vs Spring Data Test Comparison

This project compares different ways to query a database using QueryDSL, JPA, and Spring Data. It shows how these methods generate and execute SQL queries, with the first three methods running through Hibernate, and the fourth using a direct SQL approach.

## How To Run

1) Checkout the repository.
2) Run the tests under via;
   ```shell
   ./gradlew :workshop:querydsl:query-factory:clean :workshop:querydsl:query-factory:test
   ```

## Overview

The project revolves around a `Person` entity and demonstrates four ways to query it:

- JPA Method Queries (via Hibernate)
- JPQL Queries in JPA (via Hibernate)
- QueryDSL with JPA (via Hibernate)
- QueryDSL with SQL Factory (direct SQL)

### Entity: `Person`

The `Person` class is a simple JPA entity representing a person with an ID, username, first name, and last name, mapped to a `person` table in the database.

### Repository: `PersonRepository`

The `PersonRepository` interface extends `JpaRepository` and provides basic database operations and custom query methods:

- `findByFirstName(String firstName)`: Finds a person by their first name using Spring Data JPA's method query.
- `findByJpa(String firstName)`: Finds a person by their first name using a JPQL query.

### QueryDSL Class: `QPersonRawQuery`

The `QPersonRawQuery` class is generated by QueryDSL and is used for creating type-safe SQL queries. It represents the `person` table and its columns.

## Test Descriptions

1. **testNamedQuery()**
   - **Purpose**: Runs a predefined query in JPA to find a person by their first name.
   - **SQL Generated**: A simple SQL query to fetch a person by their first name.
   - **Note**: This query runs via Hibernate.

2. **testJpaQuery()**
   - **Purpose**: Executes a JPQL query using JPA's `EntityManager` to find a person by their first name.
   - **SQL Generated**: A similar SQL query as the named query, derived from JPQL.
   - **Note**: This query runs via Hibernate.

3. **testQueryDslJpaQuery()**
   - **Purpose**: Uses QueryDSL with JPA to generate and execute a type-safe query.
   - **SQL Generated**: SQL generated by Hibernate for the QueryDSL query.
   - **Note**: This query runs via Hibernate.

4. **testQueryDslSqlFactory()**
   - **Purpose**: Uses QueryDSL with SQL Factory to generate and execute a custom SQL query.
   - **SQL Generated**: A custom SQL query created by QueryDSL to fetch specific columns by first name.
   - **Note**: This query does not use Hibernate and directly executes the SQL.

